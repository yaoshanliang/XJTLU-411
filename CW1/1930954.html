<!DOCTYPE html>
<html lang="en-us">

<head>
    <title>Music Festival</title>
    <meta charset="utf-8" />
    <meta name="description" content="Different kind of fruits." />
    <link rel="shortcut icon" href="./images/favicon.ico" />
    <script src="./js/data.js"></script>
    <script src="./js/function.js"></script>
    <script type="text/javascript"
        src="https://api.map.baidu.com/api?v=3.0&ak=7YPyMbkBMCsimw2pVN0aYbXYzRO9R9ji"></script>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/iconfont.css" />
</head>

<body>

    <!-- header section -->
    <section class="banner" role="banner" id="banner">
        <header id="header" class="">
            <div class="header-content clearfix">
                <span class="logo">
                    <a href="1930954.html">XJTLU Music Festival</a>
                </span>
                <nav class="navigation open" role="navigation">
                    <ul class="primary-nav">
                        <li><a href="#banner" class="active">Home</a></li>
                        <li><a href="#playlist" class="">Playlist</a></li>
                        <li><a href="#information" class="">Information</a></li>
                        <li><a href="#gallery" class="">Gallery</a></li>
                        <li><a href="#app" class="">APP</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <!-- banner text -->
        <div class="container">
            <div class="col-md-10">
                <div class="banner-text text-center">
                    <h1>Music Festival</h1>
                    <p>Enjoy the live event</p>
                    <div><strong>18:00, 1 May 2020, XJTLU.</strong></div>
                    <div class="countdown">
                        <div class="countdown-container days"><span class="countdown-value days-bottom"
                                id="days-number">--</span><span class="countdown-heading days-top">Days</span></div>
                        <div class="countdown-container hours"><span class="countdown-value hours-bottom"
                                id="hours-number">--</span><span class="countdown-heading hours-top">Hours</span></div>
                        <div class="countdown-container minutes"><span class="countdown-value minutes-bottom"
                                id="minutes-number">--</span><span class="countdown-heading minutes-top">Minutes</span>
                        </div>
                        <div class="countdown-container seconds"><span class="countdown-value seconds-bottom"
                                id="seconds-number">--</span><span class="countdown-heading seconds-top">Seconds</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- banner text -->
    </section>
    <!-- header section -->

    <!-- playlist section -->
    <section id="playlist" class="playlist">
        <div class="container">
            <div class="section-header">
                <h2>Playlist</h2>
                <p>Song list at the festival</p>
            </div>

            <div class="row">
                <div id="jp_container_2" class="jp-audio" role="application" aria-label="media player">
                    <div class="jp-type-playlist">
                        <div class="jp-gui jp-interface">
                            <div class="music-player">
                                <!-- audio -->
                                <audio class="music-player__audio" id="audio-item" src=""></audio>
                                <div class="music-player__main">
                                    <div class="music-player__blur" id="song-background"></div>
                                    <div class="music-player__disc">
                                        <div class="music-player__image">
                                            <img width="100%" id="song-icon" src="" alt="">
                                        </div>
                                    </div>
                                    <div class="music-player__controls">
                                        <div class="music__info">
                                            <h3 class="music__info--title" id="song-name"></h3>
                                            <p class="music__info--singer" id="song-singer"></p>
                                        </div>
                                        <div class="player-control">
                                            <div class="player-control__content">
                                                <div class="player-control__btns">
                                                    <div class="player-control__btn player-control__btn--next"
                                                        id="previous" onclick="previous();">
                                                        <img src="./images/music_previous.png"></div>
                                                    <div class="player-control__btn player-control__btn--play" id="play"
                                                        onclick="play();">
                                                        <img src="./images/music_play.png"></div>
                                                    <div class="player-control__btn player-control__btn--play" id="stop"
                                                        style="display: none;" onclick="pauseplay();">
                                                        <img src="./images/music_stop.png"></div>
                                                    <div class="player-control__btn player-control__btn--next" id="next"
                                                        onclick="next();">
                                                        <img src="./images/music_next.png"></div>
                                                </div>
                                                <div class="player-control__volume">
                                                    <div class="control__volume--icon player-control__btn" id="sound"
                                                        onclick="mute();">
                                                        <img src="./images/sound.png"></div>
                                                    <div class="control__volume--icon player-control__btn" id="mute"
                                                        style="display: none;" onclick="sound();">
                                                        <img src="./images/sound_mute.png"></div>
                                                    <div class="control__volume--progress progress">
                                                        <div class="back" id="volumeBar"></div>
                                                    </div>
                                                    <div class="control__volume--icon player-control__btn" id="minus"
                                                        onclick="volumeDown();">
                                                        <img src="./images/minus.png">
                                                    </div>
                                                    <div class="control__volume--icon player-control__btn" id="add"
                                                        onclick="volumeUp();"><img src="./images/add.png">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="player-control__content">
                                                <div class="player__song--progress progress">
                                                    <div class="back" id="bar"></div>
                                                </div>
                                                <div class="player__song--timeProgess nowTime" id="nowTime">0:00</div>
                                                <div class="player__song--timeProgess totalTime" id="totalTime">0:00
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--play list-->
                        <div class="jp-playlist" id="songlist">

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- playlist section -->

    <!-- gallery section -->
    <section id="gallery" class="gallery">
        <div class="container">
            <div class="section-header">
                <h2>Gallery</h2>
                <p>Images at the past festival</p>
            </div>

            <div class="row" id="galleryList">
            </div>
        </div>

        <div id="zoom" style="display: none;">
            <a class="close" onclick="closeImage();"></a>
            <a class="previous" onclick="previousImage();"></a>
            <a class="next" onclick="nextImage();"></a>
            <div class="content" style="width: 441px; height: 660px; margin-top: -330px; margin-left: -320.5px;">
                <img id="zoomImage" width="600px;" height="500;">
            </div>
        </div>
    </section>
    <!-- gallery section -->


    <!-- services section -->
    <section id="information" class="services service-section">
        <div class="container">
            <div class="section-header">
                <h2 class="wow fadeInDown animated">We Do</h2>
                <p class="wow fadeInDown animated">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent
                    eget risus vitae massa <br> semper aliquam quis mattis quam.</p>
            </div>
            <div class="row">
                <div class="col-md-4 col-sm-6 services text-center"> <span class="icon icon-recycle"></span>
                    <div class="services-content">
                        <h5>ALBUMS</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis eu libero scelerisque ligula
                            sagittis faucibus eget quis lacus.</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6 services text-center"> <span class="icon icon-heart"></span>
                    <div class="services-content">
                        <h5>MUSIC PLAYLIST</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis eu libero scelerisque ligula
                            sagittis faucibus eget quis lacus.</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6 services text-center"> <span class="icon icon-megaphone"></span>
                    <div class="services-content">
                        <h5>GALLERY</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis eu libero scelerisque ligula
                            sagittis faucibus eget quis lacus.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- services section -->

    <section id="app">
        <div class="container">

            <div class="section-header">
                <h2 class="wow fadeInDown animated">We Do</h2>
                <p class="wow fadeInDown animated">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent
                    eget risus vitae massa <br> semper aliquam quis mattis quam.</p>
            </div>
            <div id="map"></div>
            <div id="panorama"></div>
	<div id="svInfoText"></div>
        </div>
    </section>

</body>
<footer>
    <div class="container">
        <div class="text-center">
            <p class="copyright"><small>Copyright © 2020. Shanliang Yao All rights reserved.
                    <a target="_blank" href="https://about.iat.net.cn/">苏ICP备18065142号-1</a></small>
            </p>
        </div>
    </div>
</footer>
<script>

    // Calculate the left time
    setInterval("countdown()", 1000);

    // Define the current song id
    let currentSong = 0;

    // Define the length of current song
    let duration = 0;

    // Play, pause, volume up and volume down
    let audiop = document.getElementById("audio-item");
    function play() {
        audiop.play();
        document.getElementsByClassName("music-player__image")[0].classList.add("play");
        document.getElementById("play").style.display = 'none';
        document.getElementById("stop").style.display = 'block';

        for (let i = 0; i < songs.length; i++) {
            document.getElementsByClassName("songItem")[i].classList.remove("currentSong");

            if (i == currentSong) {
                document.getElementById("song-name").innerText = songs[i].name;
                document.getElementById("song-singer").innerText = songs[i].singer;
                document.getElementById("song-icon").setAttribute("src", './audio/' + songs[i].image);
                document.getElementById("song-background").setAttribute("backgroundImage", './audio/' + songs[i].image);
                document.getElementsByClassName("songItem")[i].classList.add("currentSong");

            }
        }

    }
    function pauseplay() {
        audiop.pause();
        document.getElementsByClassName("music-player__image")[0].classList.remove("play");
        document.getElementById("play").style.display = 'block';
        document.getElementById("stop").style.display = 'none';
    }

    let lastVolume = 0;
    function mute() {
        lastVolume = audiop.volume;
        audiop.volume = 0;
        document.getElementById("sound").style.display = 'none';
        document.getElementById("mute").style.display = 'block';
        document.getElementById("volumeBar").style.width = "0%";
    }
    function sound() {
        audiop.volume = lastVolume;
        document.getElementById("sound").style.display = 'block';
        document.getElementById("mute").style.display = 'none';
        document.getElementById("volumeBar").style.width = parseFloat((lastVolume * 100), 10) + "%";
    }
    function volumeUp() {
        console.log(audiop.volume)
        if (audiop.volume < 1) {
            audiop.volume = audiop.volume + 0.1;
        }
        document.getElementById("volumeBar").style.width = parseFloat((audiop.volume * 100), 10) + "%";
    }
    function volumeDown() {
        console.log(audiop.volume)
        if (audiop.volume > 0) {
            audiop.volume = audiop.volume - 0.1;
        }
        document.getElementById("volumeBar").style.width = parseFloat((audiop.volume * 100), 10) + "%";
    }

    // Next song function
    function next() {
        currentSong++;
        if (currentSong > songs.length - 1) {
            currentSong = 0;
        }
        audiop.setAttribute('src', './audio/' + songs[currentSong].path)
        play();
    }

    // Previous song function
    function previous() {
        currentSong--;
        if (currentSong < 0) {
            currentSong = songs.length - 1;
        }
        audiop.setAttribute('src', './audio/' + songs[currentSong].path)
        play();
    }

    // Calculate the process of this song
    audiop.load();
    audiop.oncanplay = function () {
        duration = audiop.duration
    }

    audiop.addEventListener('timeupdate', updatePlayBar, false);
    function updatePlayBar() {
        let minutes = (audiop.currentTime / 60).toFixed(0);
        let seconds = (audiop.currentTime % 60).toFixed(0);
        if (seconds < 10) {
            seconds = '0' + seconds;
        }
        document.getElementById("nowTime").innerText = minutes + ':' + seconds;

        if (!isNaN(audiop.duration)) {
            minutes = (audiop.duration / 60).toFixed(0);
            seconds = (audiop.duration % 60).toFixed(0);
            if (seconds < 10) {
                seconds = '0' + seconds;
            }
            document.getElementById("totalTime").innerText = minutes + ':' + seconds;
        }

        document.getElementById("bar").style.width = parseFloat(((audiop.currentTime / audiop.duration) * 100), 10) + "%";
    }

    let html = '';
    for (let i = 0; i < songs.length; i++) {
        html += '<div class="songItem" id="song-item-' + i + '"  onclick="playSong(' + i + ')">' +
            '<img class="songImage" src="./audio/' + songs[i].image + '">' +
            '<div class="songName">' + songs[i].name + '</div>' +
            '<div class="songSinger">' + songs[i].singer + '</div>' +
            '</div>';
    }

    document.getElementById("songlist").innerHTML = html;

    function playSong(id) {
        console.log(id);
        currentSong = id;
        audiop.setAttribute('src', './audio/' + songs[currentSong].path);
        play();
    }

    // Init the first song
    audiop.setAttribute('src', './audio/' + songs[0].path);
    document.getElementById("song-name").innerText = songs[0].name;
    document.getElementById("song-singer").innerText = songs[0].singer;
    document.getElementById("song-icon").setAttribute("src", './audio/' + songs[0].image);
    document.getElementById("song-background").setAttribute("background-image", "url(" + './audio/' + songs[0].image + ")");
    document.getElementsByClassName("songItem")[0].classList.add("currentSong");
    document.getElementById("volumeBar").style.width = parseFloat((audiop.volume * 100), 10) + "%";



    let currentImage = 0;
    html = '';
    for (let i = 0; i < gallery.length; i++) {
        html += '<div class="col-md-3"  onclick="showImage(' + i + ')">' +
            '<img class="galleryImage" src="./gallery/' + gallery[i] + '">' +
            '</div>';
    }
    document.getElementById("galleryList").innerHTML = html;

    function showImage(id) {
        currentImage = id;
        document.getElementById("zoomImage").setAttribute("src", './gallery/' + gallery[id]);
        document.getElementById("zoom").style.display = 'block';
    }
    function closeImage() {
        document.getElementById("zoomImage").setAttribute("src", '');
        document.getElementById("zoom").style.display = 'none';
    }
    function previousImage() {
        currentImage--;
        if (currentImage < 0) {
            currentImage = gallery.length - 1;
        }
        document.getElementById("zoomImage").setAttribute("src", './gallery/' + gallery[currentImage]);
    }

    function nextImage() {
        currentImage++;
        if (currentImage > gallery.length - 1) {
            currentImage = 0;
        }
        document.getElementById("zoomImage").setAttribute("src", './gallery/' + gallery[currentImage]);
    }


    // 百度地图API功能
    // var map = new BMap.Map("map");  // 创建Map实例
    // var point = new BMap.Point(120.746339, 31.279684); // 创建点坐标
    // map.centerAndZoom(point, 17);
    // map.enableScrollWheelZoom();                 //启用滚轮放大
    // //添加地图类型控件
    // map.addControl(new BMap.MapTypeControl({
    //     mapTypes: [
    //         BMAP_NORMAL_MAP,
    //         BMAP_HYBRID_MAP
    //     ]
    // }));

    // map.addControl(new BMap.NavigationControl());
    // var marker = new BMap.Marker(point);  // 创建标注
    // map.addOverlay(marker);              // 将标注添加到地图中
    // map.centerAndZoom(point, 15);
    // var sContent =
    //     "<h4 style='margin:0 0 5px 0;padding:0.2em 0'>Xi'an Jiaotong-Liverpool University</h4>" +
    //     "<img style='float:right;margin:4px' id='imgDemo' src='./images/XJTLU.jpg' width='139' height='104' title='天安门'/>" +
    //     "<p style='margin:0;line-height:1.5;font-size:13px;'>111 Ren'ai Road <br><br>Suzhou Dushu Lake Science and Education Innovation District<br> <br>Suzhou Industrial Park</p>" +
    //     "</div>";
    // var infoWindow = new BMap.InfoWindow(sContent);
    // marker.addEventListener("click", function () {
    //     map.openInfoWindow(infoWindow, point); //开启信息窗口
    // });

    var panorama = new BMap.Panorama('panorama');
    panorama.setPosition(new BMap.Point(120.74580310559392,31.27993518548611)); //根据经纬度坐标展示全景图
    // panorama.setPosition(new BMap.Point(120.7458,31.279)); //根据经纬度坐标展示全景图
    // panorama.setPov({ heading: 200, pitch: 0 });
    panorama.setPov({heading:100,pitch : 0});
    // panorama.setPov({heading: -40, pitch: 6});



    // var panorama = new BMap.Panorama('panorama');
	// panorama.setPosition(new BMap.Point(120.74580310559392,31.27993518548611));
	// panorama.addEventListener('position_changed', function(e){ //全景位置改变事件
	//    panoramaCallBack(e);
	// });
	// panorama.addEventListener('pov_changed', function(e){ //全景视角改变事件
	// 	panoramaCallBack(e);
	// });
	// function panoramaCallBack(e){ //事件回调函数
	// 	if (e.type == 'onpov_changed') { 
	// 		document.getElementById('svInfoText').innerHTML="全景视角为：<br/>"+"水平视角："+panorama.getPov().heading+"<br/>垂直视角："+panorama.getPov().pitch;
	// 	}
	// 	else if (e.type=='onposition_changed') {
	// 		document.getElementById('svInfoText').innerHTML="全景位置点为："+panorama.getPosition().lng+","+panorama.getPosition().lat;
	// 	}
	// }

</script>

</html>